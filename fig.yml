postgres:
  image: postgres:9.4
  volumes:
    - docker/var/postgres:/var/lib/postgresql/data
  environment:
    POSTGRES_USER: postgres
    POSTGRES_PASSWORD: postgres
  ports:
    - 5432

nginx:
  image: nginx:1.7.9
  ports:
    - 80:80
  volumes:
    - docker/config/nginx.conf:/etc/nginx/nginx.conf
    - public:/usr/share/nginx/html
  links:
    - app

cogsclient:
  image: caseywebdev/cogs:0.29.3
  volumes:
    - .:/assets
  environment:
    CONFIG: cogs-client-dev.js

cogsserver:
  image: caseywebdev/cogs:0.29.3
  volumes:
    - .:/assets
  environment:
    CONFIG: cogs-server-dev.js

app:
  build: .
  volumes:
    - .:/usr/local/src
  links:
    - postgres
  ports:
    - 3000
  command: node_modules/.bin/watchy -pw build -- exec node build/node_modules
